---
name: Project details
route: /architecture/project
menu: 'Architecture and patterns'
---

# Project details

For developers contributing to this project, or extending, forking, or consuming the player or components library.

## package.json/yarn commands

[Yarn](https://yarnpkg.com/) is used instead of `npm`. The workflows are not tested with `npm`.

Run `yarn install` before continuing with any of the commands below.

#### Start dev server with demo app for development

The default port is set to be `3033`.

```sh
yarn start
```

#### Run Flow type checks

```sh
yarn flow
```

#### Run tests

```sh
yarn test
```

#### Build component library with docs, prepared for production/npm publish

```sh
yarn build:lib
```

#### Start x0 docs server for writing or displaying live component code examples

```sh
yarn docz:dev
```

#### Library build subtasks

These are run as part of the `yarn build:lib` command:

```sh
build:es5
build:flow
build:css
docz:build
```

#### Create-React-App legacy commands

These have no purpose for this project.

```sh
yarn build
yarn eject
```

## Using Flow types

Component prop types are specified with Flow. And quite importantly, the video streamer API is defined with Flow types. These types are essential to understanding how controls should operate on the video playback, and for creating different VideoStreamer components wrapping different playback technologies.

However, Flow is not perfect, and there are examples of `// $FlowFixMe` in the code. It cannot be guaranteed that all typing is protecting against incorrect API usage.

All code being part of the exposed library should be annotated with Flow types, with the `// @flow` "directive" at the start of the file.

The npm package is set up so that consumers automatically will have the Flow types of Replay, components, and other exposed parts, available.

## Before commit

If contributing to the repo, the following commands should be run and complete without errors before committing changes:

* `prettier --write "src/**/*.js"`. Will reformat code.
* `yarn flow`
* `yarn test`
* `yarn eslint src/replay --ignore-pattern '*.test.js'` should display no warnings.

These steps will be improved and automated in the future. Some of them are also part of the automated build.