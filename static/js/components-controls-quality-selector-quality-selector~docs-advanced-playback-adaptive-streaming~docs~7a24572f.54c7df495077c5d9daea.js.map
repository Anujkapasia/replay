{"version":3,"sources":["webpack:///./src/replay/components/controls/QualitySelector/QualitySelector.js","webpack:///./src/replay/components/generic/Selector/helpers.js","webpack:///./src/replay/components/generic/Selector/Selector.js","webpack:///./src/replay/components/generic/ToggleButton/ToggleButton.js"],"names":["QualitySelector","bitrate","_this","props","setProperties","selectionStrategy","bitrateFix","bitrateCap","id","label","Infinity","autoLabel","formatBitrateLabel","currentBitrate","data","index","arr","_this$props","matchValue","length","React","_this$props2","this","bitrates","toggleContent","classNamePrefix","Array","isArray","items","concat","selectedItem","filter","isSelected","react__WEBPACK_IMPORTED_MODULE_0__","_generic_Selector_Selector__WEBPACK_IMPORTED_MODULE_1__","itemMapper","bitrateToItem","className","onSelect","handleSelect","reverseOrder","expandedToggleContent","collapsedToggleContent","defaultClassNamePrefix","displayName","selectItemClasses","classes","selectorItem","selectItemSelectedClasses","selectorItemSelected","SelectorItem","_React$Component","_getPrototypeOf2","_classCallCheck","_len","arguments","args","_key","_getPrototypeOf","call","apply","_defineProperty","_assertThisInitialized","element","onRef","item","getKeyboardShortcutBlocker","keyboardEvent","key","preventDefault","handleClick","_inherits","value","defaultItemClassName","canReceiveFocus","selectedClassName","classNames","hydrateClassNames","selectClasses","tabIndex","undefined","react","role","aria-selected","ref","handleRef","onClick","onKeyDown","handleKeyDown","onKeyUp","handleKeyUp","focusElement","upwards","isReverseOrder","baseElement","elements","slice","reverse","i","document","activeElement","j","focus","selectCollapsedClasses","selectorCollapsed","selector","selectExpandedClasses","selectorExpanded","selectItemsContainerClasses","selectorItemsContainer","Selector","Selector_classCallCheck","Selector_getPrototypeOf","Selector_defineProperty","Selector_assertThisInitialized","toggleElement","isOn","setState","isExpanded","itemElement","focusableItems","itemData","helpers_SelectorItem","handleItemRef","state","itemClassName","renderedItems","map","renderSelectorItem","itemsContainerClassNames","toggleButtonClasses","toggleButtonOff","selectorToggle","selectorToggleOff","toggleButtonOn","selectorToggleOn","onMouseLeave","handleMouseLeave","ToggleButton","onToggle","handleToggle","onToggleRef","toggledOffContent","toggledOnContent","useDefaultClassNaming","selectOffClasses","toggleButton","selectOnClasses","toggleClassName","content","aria-pressed","title"],"mappings":"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","file":"static/js/components-controls-quality-selector-quality-selector~docs-advanced-playback-adaptive-streaming~docs~7a24572f.324fa8c7.js","sourcesContent":["// @flow\nimport * as React from 'react';\nimport Selector from '../../generic/Selector/Selector';\nimport { defaultClassNamePrefix } from '../../common';\nimport type { CommonProps } from '../../common';\nimport type { StreamStateKeysForObservation } from '../../player/PlayerController/ControllerContext';\n\nexport type QualitySelectionStrategy = 'cap-bitrate' | 'fix-bitrate';\n\ntype Props = CommonProps & {\n  /** ⇘︎ The list of bitrates available for adaptive selection, and for being fixed or set as cap level. */\n  bitrates?: Array<number>,\n  /** ⇘︎ The currently playing bitrate. */\n  currentBitrate?: number,\n  /** ⇘︎ If playback is (already) fixed to one bitrate, this prop is set. */\n  bitrateFix?: ?number,\n  /** ⇘︎ If adaptive bitrate selection is (already) capped at a level, this prop is set. */\n  bitrateCap?: ?number,\n  /** The content of the toggle button of the selector. */\n  toggleContent: React.Node,\n  /** ⇗ When one item is clicked, this callback is invoked with an object having a property with either the name bitrateCap or bitrateFix and a value according to the selected bitrate. For the auto option, the value is Infinity. */\n  setProperties?: ({ bitrateFix: ?number } | { bitrateCap: ?number }) => void,\n  /** Configures whether the selector should specify bitrate cap or fixing. */\n  selectionStrategy?: QualitySelectionStrategy,\n  /** The label for the selector item used for resetting capped or fixed bitrate. */\n  autoLabel: string,\n  /** Should return the item text to be displayed for each bitrate. The second argument indicates if the bitrate is currently playing. */\n  formatBitrateLabel: (number, boolean) => string\n};\n\nconst className = 'quality-selector';\n\nclass QualitySelector extends React.Component<Props> {\n  static defaultProps = {\n    classNamePrefix: defaultClassNamePrefix,\n    selectionStrategy: 'cap-bitrate'\n  };\n\n  static streamStateKeysForObservation: StreamStateKeysForObservation = [\n    'bitrates',\n    'currentBitrate',\n    'bitrateFix',\n    'bitrateCap'\n  ];\n\n  handleSelect = (bitrate: number) => {\n    if (this.props.setProperties) {\n      if (this.props.selectionStrategy === 'fix-bitrate') {\n        this.props.setProperties({ bitrateFix: bitrate });\n      } else {\n        this.props.setProperties({ bitrateCap: bitrate });\n      }\n    }\n  };\n\n  bitrateToItem = (bitrate: number) => ({\n    id: bitrate,\n    label:\n      bitrate === Infinity\n        ? this.props.autoLabel\n        : this.props.formatBitrateLabel(bitrate, bitrate === this.props.currentBitrate),\n    data: bitrate\n  });\n\n  isSelected = (bitrate: number, index: number, arr: Array<number>) => {\n    const { bitrateFix, bitrateCap, selectionStrategy } = this.props;\n    const matchValue =\n      bitrateFix != null && bitrateCap != null\n        ? selectionStrategy === 'fix-bitrate'\n          ? bitrateFix\n          : bitrateCap\n        : bitrateFix || bitrateCap;\n    if (matchValue === 'min') {\n      return index === 1;\n    } else if (matchValue === 'max') {\n      return index === arr.length - 1;\n    } else {\n      return bitrate === matchValue;\n    }\n  };\n\n  render() {\n    const { bitrates, label, toggleContent, classNamePrefix } = this.props;\n    if (Array.isArray(bitrates) && bitrates.length > 1) {\n      const items = [Infinity].concat(bitrates);\n      const selectedItem = items.filter(this.isSelected)[0] || items[0];\n\n      return (\n        <Selector\n          items={items}\n          itemMapper={this.bitrateToItem}\n          classNamePrefix={classNamePrefix}\n          className={className}\n          selectedItem={selectedItem}\n          label={label}\n          onSelect={this.handleSelect}\n          reverseOrder={true}\n          expandedToggleContent={toggleContent}\n          collapsedToggleContent={toggleContent}\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nQualitySelector.displayName = 'QualitySelector';\nexport default QualitySelector;\n","// @flow\nimport * as React from 'react';\nimport { getKeyboardShortcutBlocker, hydrateClassNames } from '../../common';\nimport type { CommonGenericProps, Id } from '../../common';\n\nexport type ItemData = {\n  label: string,\n  id?: Id,\n  data?: any\n};\n\ntype SelectorItemProps = CommonGenericProps & {\n  item: ItemData,\n  index: number,\n  isSelected: boolean,\n  canReceiveFocus: boolean,\n  defaultItemClassName: string,\n  selectedClassName: string,\n  onSelect?: any => void,\n  onRef: (?HTMLElement, number) => void\n};\n\nconst selectItemClasses = classes => classes.selectorItem;\nconst selectItemSelectedClasses = classes => classes.selectorItemSelected || classes.selectorItem;\n\nexport class SelectorItem extends React.Component<SelectorItemProps> {\n  handleRef = (element: ?HTMLElement) => {\n    this.props.onRef(element, this.props.index);\n  };\n\n  handleClick = () => this.props.onSelect && this.props.onSelect(this.props.item.data);\n\n  handleKeyDown = getKeyboardShortcutBlocker(['Enter', ' ']);\n\n  handleKeyUp = (keyboardEvent: KeyboardEvent) => {\n    if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n      keyboardEvent.preventDefault();\n      this.handleClick();\n    }\n  };\n\n  render() {\n    const {\n      className,\n      classNamePrefix,\n      classes,\n      defaultItemClassName,\n      item,\n      isSelected,\n      canReceiveFocus,\n      selectedClassName\n    } = this.props;\n    const { label } = item;\n    const classNames = hydrateClassNames({\n      classes,\n      classNamePrefix,\n      selectClasses: isSelected ? selectItemSelectedClasses : selectItemClasses,\n      classNames: [className, defaultItemClassName, isSelected ? selectedClassName : null]\n    });\n    const tabIndex = canReceiveFocus ? 0 : undefined;\n    return (\n      <div\n        role=\"option\"\n        aria-selected={isSelected}\n        className={classNames}\n        ref={this.handleRef}\n        onClick={this.handleClick}\n        onKeyDown={this.handleKeyDown}\n        onKeyUp={this.handleKeyUp}\n        tabIndex={tabIndex}>\n        <div tabIndex={-1}>{label}</div>\n      </div>\n    );\n  }\n}\n\nexport function focusElement(\n  upwards: boolean,\n  isReverseOrder: boolean,\n  items: Array<?HTMLElement>,\n  baseElement: ?HTMLElement\n) {\n  const elements = (isReverseOrder ? items.slice(0).reverse() : items).concat(baseElement);\n  for (let i = 0; i < elements.length; i++) {\n    if (elements[i] === document.activeElement) {\n      if (upwards) {\n        if (i > 0) {\n          for (let j = i - 1; j >= 0; j--) {\n            const element = elements[j];\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      } else {\n        if (i < elements.length - 1) {\n          for (let j = i + 1; j < elements.length; j++) {\n            const element = elements[j];\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type CommonGenericProps, hydrateClassNames } from '../../common';\nimport ToggleButton from '../ToggleButton/ToggleButton';\nimport { focusElement, SelectorItem } from './helpers';\nimport type { ItemData } from './helpers';\n\ntype Props = CommonGenericProps & {\n  items: Array<any>,\n  selectedItem?: any,\n  reverseOrder?: boolean,\n  itemClassName?: string,\n  collapsedToggleContent?: React.Node,\n  expandedToggleContent?: React.Node,\n  label?: string,\n  itemMapper: any => ItemData,\n  onSelect?: any => void\n};\n\ntype SelectorState = {\n  isExpanded: boolean\n};\n\nconst defaultSelectorClassName = 'selector';\nconst expandToggleClassName = 'selector-toggle';\nconst selectorItemsClassName = 'selector-items';\nconst expandedClassName = 'expanded';\nconst collapsedClassName = 'collapsed';\nconst defaultItemClassName = 'selector-item';\nconst selectedClassName = 'selected';\n\nconst selectCollapsedClasses = classes => classes.selectorCollapsed || classes.selector;\nconst selectExpandedClasses = classes => classes.selectorExpanded || classes.selector;\nconst selectItemsContainerClasses = classes => classes.selectorItemsContainer;\n\nclass Selector extends React.Component<Props, SelectorState> {\n  static defaultProps = {\n    useDefaultClassNaming: true\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isExpanded: false\n    };\n  }\n\n  focusableItems: Array<?HTMLElement> = [];\n  toggleElement: ?HTMLElement = null;\n\n  onToggleRef = (toggleElement: ?HTMLElement) => {\n    this.toggleElement = toggleElement;\n  };\n\n  handleToggle = (isOn: boolean) => this.setState({ isExpanded: isOn });\n\n  handleItemRef = (itemElement: ?HTMLElement, index: number) => {\n    this.focusableItems[index] = itemElement;\n  };\n\n  renderSelectorItem = (item: any, index: number) => {\n    const itemData = this.props.itemMapper(item);\n    return (\n      <SelectorItem\n        key={itemData.id}\n        item={itemData}\n        index={index}\n        onSelect={this.props.onSelect}\n        onRef={this.handleItemRef}\n        isSelected={item === this.props.selectedItem}\n        canReceiveFocus={this.state.isExpanded}\n        selectedClassName={selectedClassName}\n        defaultItemClassName={defaultItemClassName}\n        className={this.props.itemClassName}\n        classes={this.props.classes}\n        classNamePrefix={this.props.classNamePrefix}\n      />\n    );\n  };\n\n  handleKeyDown = (keyboardEvent: KeyboardEvent) => {\n    switch (keyboardEvent.key) {\n      case 'ArrowUp':\n      case 'Up':\n        keyboardEvent.preventDefault();\n        return;\n      case 'ArrowDown':\n      case 'Down':\n        if (this.state.isExpanded) {\n          keyboardEvent.preventDefault();\n        }\n        return;\n      default:\n        return;\n    }\n  };\n\n  handleKeyUp = (keyboardEvent: KeyboardEvent) => {\n    if (this.state.isExpanded) {\n      if (keyboardEvent.key === 'ArrowUp' || keyboardEvent.key === 'Up') {\n        keyboardEvent.preventDefault();\n        focusElement(true, this.props.reverseOrder || false, this.focusableItems, this.toggleElement);\n      }\n      if (keyboardEvent.key === 'ArrowDown' || keyboardEvent.key === 'Down') {\n        keyboardEvent.preventDefault();\n        const focusedElement = focusElement(\n          false,\n          this.props.reverseOrder || false,\n          this.focusableItems,\n          this.toggleElement\n        );\n        if (focusedElement === this.toggleElement) {\n          this.setState({ isExpanded: false });\n        }\n      }\n    } else {\n      if (keyboardEvent.key === 'ArrowUp' || keyboardEvent.key === 'Up') {\n        keyboardEvent.preventDefault();\n        this.setState({ isExpanded: true });\n      }\n    }\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ isExpanded: false });\n  };\n\n  render() {\n    const {\n      className,\n      classNamePrefix,\n      classes,\n      items,\n      collapsedToggleContent,\n      expandedToggleContent,\n      reverseOrder,\n      label\n    } = this.props;\n    const renderedItems = items\n      ? reverseOrder\n        ? items.map(this.renderSelectorItem).reverse()\n        : items.map(this.renderSelectorItem)\n      : null;\n    const classNames = hydrateClassNames({\n      classes,\n      classNamePrefix,\n      selectClasses: this.state.isExpanded ? selectExpandedClasses : selectCollapsedClasses,\n      classNames: [className, defaultSelectorClassName, this.state.isExpanded ? expandedClassName : collapsedClassName]\n    });\n    const itemsContainerClassNames = hydrateClassNames({\n      classes,\n      selectClasses: selectItemsContainerClasses,\n      classNamePrefix,\n      classNames: [selectorItemsClassName]\n    });\n    const toggleButtonClasses = classes\n      ? {\n          toggleButtonOff: classes.selectorToggle || classes.selectorToggleOff,\n          toggleButtonOn: classes.selectorToggleOn\n        }\n      : null;\n\n    return (\n      <div\n        className={classNames}\n        onKeyUp={this.handleKeyUp}\n        onKeyDown={this.handleKeyDown}\n        onMouseLeave={this.handleMouseLeave}>\n        <ToggleButton\n          isOn={this.state.isExpanded}\n          className={expandToggleClassName}\n          classNamePrefix={classNamePrefix}\n          classes={toggleButtonClasses}\n          label={label}\n          onToggle={this.handleToggle}\n          onRef={this.onToggleRef}\n          toggledOffContent={collapsedToggleContent}\n          toggledOnContent={expandedToggleContent}\n        />\n        <div role=\"listbox\" className={itemsContainerClassNames}>\n          {renderedItems}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Selector;\n","// @flow\nimport * as React from 'react';\nimport { type CommonGenericProps, getKeyboardShortcutBlocker, hydrateClassNames } from '../../common';\n\ntype Props = CommonGenericProps & {\n  /** Set to true if the button should be in the toggled on mode. */\n  isOn?: boolean,\n  /** The label will appear in the title attribute of the root DOM element of the toggle button. */\n  label?: string,\n  /** The button content to be displayed when the button is toggled off. */\n  toggledOffContent?: React.Node,\n  /** The button content to be displayed when the button is toggled on. */\n  toggledOnContent?: React.Node,\n  /** A callback method that will be invoked when the button is clicked and the value toggled. If the button has been toggled on, true is passed to the callback. */\n  onToggle?: boolean => void,\n  /** A callback method invoked with the rendered button element, for focus purposes. */\n  onRef?: (?HTMLElement) => void\n};\n\nconst baseClassName = 'toggle-button';\nconst offClassName = 'toggled-off';\nconst onClassName = 'toggled-on';\n\nconst selectOffClasses = classes => classes.toggleButtonOff || classes.toggleButton;\nconst selectOnClasses = classes => classes.toggleButtonOn || classes.toggleButton;\n\n/**\n * Renders a button with two states - toggled on and off. When clicked, it reports back the opposite state.\n */\nclass ToggleButton extends React.Component<Props> {\n  static defaultProps = {\n    useDefaultClassNaming: true\n  };\n\n  handleClick = () => this.props.onToggle && this.props.onToggle(!this.props.isOn);\n\n  handleKeyDown = getKeyboardShortcutBlocker(['Enter', ' ']);\n\n  handleKeyUp = (keyboardEvent: KeyboardEvent) => {\n    if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n      keyboardEvent.preventDefault();\n      this.handleClick();\n    }\n  };\n\n  render() {\n    const { isOn, label, className, classNamePrefix, toggledOnContent, toggledOffContent, onRef, classes } = this.props;\n    const toggleClassName = isOn ? onClassName : offClassName;\n    const classNames = hydrateClassNames({\n      classes,\n      selectClasses: isOn ? selectOnClasses : selectOffClasses,\n      classNamePrefix,\n      classNames: [className, baseClassName, toggleClassName]\n    });\n    const content = isOn ? toggledOnContent : toggledOffContent;\n    return (\n      <div\n        role=\"button\"\n        aria-pressed={isOn}\n        title={label}\n        onClick={this.handleClick}\n        onKeyUp={this.handleKeyUp}\n        onKeyDown={this.handleKeyDown}\n        ref={onRef}\n        className={classNames}\n        tabIndex={0}>\n        <div tabIndex={-1}>{content}</div>\n      </div>\n    );\n  }\n}\n\nexport default ToggleButton;\n"],"sourceRoot":""}